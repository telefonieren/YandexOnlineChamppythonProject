
def operation_disable(data_center, server):
    main_array[data_center - 1][ server - 1] = 0



def operation_reset(data_center):
    x = 0
    for i in main_array[data_center-1]:
        main_array[data_center-1][x] = 1
        x+=1
    reset_array[data_center-1] += 1

def operation_getmax():
    max = 0
    sub_max = 0
    index = 0
    return_index = 0
    for i in main_array:

        for x in i:
            sub_max += x

        if sub_max*reset_array[index] > max:

            max = sub_max*reset_array[index]
            sub_max = 0
            return_index = index
        index += 1
        sub_max = 0

    file = open('output.txt', 'a')
    file.write(str(return_index+1)+'\n')



def operation_getmin():
    min = 0
    for i in main_array:

        for x in i:
            min += x
    sub_min = 0
    index = 0
    return_index = 0
    for i in main_array:

        for x in i:
            sub_min += x

        if sub_min*reset_array[index] < min:

            min = sub_min*reset_array[index]
            sub_min = 0
            return_index = index
        index += 1
        sub_min = 0

    file = open('output.txt', 'a')
    file.write(str(return_index+1)+'\n')



def main():

    file_output = open('output.txt','w')

    global main_array
    global reset_array
    with open('input.txt') as file:
        input_data = [int(x) for x in file.readline().strip().split(' ')]

        total_operations = input_data[2]
        main_array = [[1]*input_data[1] for i in range(input_data[0])]
        reset_array = [0]*input_data[0]



        for operations in range(total_operations):
            current_operation = file.readline().strip().split(' ')

            if current_operation[0] == 'DISABLE':

                operation_disable(int(current_operation[1]),int(current_operation[2]))

            if current_operation[0] == 'RESET':

                operation_reset(int(current_operation[1]))

            if current_operation[0] == 'GETMAX':
                operation_getmax()

            if current_operation[0] == 'GETMIN':
                operation_getmin()


if __name__ == '__main__':
    main()